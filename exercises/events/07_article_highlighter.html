<!doctype html>
<html lang='en-US'>
<head>
  <title>7 - Article Highlighter</title>
  <meta charset='utf-8'>
  <link href='../../lib/whitespace_reset.css' rel='stylesheet'>
  <script src='../../lib/good_fns_lite.js'></script>
  <style>
    .highlight { border:  1px dotted #33b5e5; background: #222; }
    header li  { display: inline-block; }
    header ul  { padding: 0; }
  </style>
</head>
<body>

  <header>
    <h1>Nav</h1>
    <ul>
      <li><a href="#article-1">Article 1</a></li>
      <li><a href="#article-2">Article 2</a></li>
      <li><a href="#article-3">Article 3</a></li>
      <li><a href="#article-4">Article 4</a></li>
    </ul>
  </header>
  <main>
    <h1>Articles</h1>
    <article id="article-1">
      <h2>Article 1</h2>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras varius pulvinar aliquam. Suspendisse sed metus vel diam pulvinar lacinia. Mauris odio ante, volutpat vitae arcu sit amet, sodales iaculis nibh. Morbi tincidunt, est non pharetra finibus, risus eros rhoncus velit, et eleifend ligula erat quis odio. Pellentesque sit amet nulla lacus. Fusce mollis aliquet ex vitae pellentesque. Suspendisse ex velit, eleifend in porta vel, porttitor a felis. Vivamus vestibulum, nulla ut iaculis dapibus, eros nisl molestie elit, at viverra neque arcu vel tellus. Vestibulum sed eros purus.

  Donec rhoncus commodo lorem. Ut id porta massa. Etiam accumsan risus eget nunc convallis convallis. Etiam eleifend metus vel libero aliquet, non convallis velit pellentesque. Maecenas vitae posuere libero. Nullam maximus sagittis metus vitae condimentum. Praesent rutrum scelerisque vulputate. Suspendisse egestas dui magna, a tempus turpis placerat vel. Integer venenatis varius feugiat. Quisque a diam eget ex lacinia porttitor. Aliquam congue sapien in tempor accumsan. Morbi sollicitudin est eget ipsum eleifend, et vestibulum risus fringilla. Vestibulum fringilla nibh est, lacinia commodo justo mollis ac. Cras vestibulum odio in varius vehicula. Praesent at sodales nisl.

  Phasellus elit enim, fermentum et finibus ut, commodo non lorem. Aliquam bibendum sapien at arcu semper, eget ultrices elit lacinia. In sed nulla quis massa sagittis cursus eu tempor odio. Nulla at imperdiet ex. Maecenas hendrerit ornare dui, nec porta dolor aliquam quis. Curabitur sollicitudin enim vel vulputate suscipit. Quisque vitae lobortis velit. Maecenas a dui pretium, suscipit elit non, gravida odio. Etiam feugiat a turpis vitae sagittis. Etiam ac nulla id metus semper aliquam eget vitae justo. Vivamus sed odio ornare, commodo tortor eget, pretium metus. Sed a aliquam ligula. Nullam a quam dui. Cras hendrerit viverra nisi, et faucibus orci elementum at.</p>
    </article>
    <article id="article-2">
      <h2>Article 2</h2>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras varius pulvinar aliquam. Suspendisse sed metus vel diam pulvinar lacinia. Mauris odio ante, volutpat vitae arcu sit amet, sodales iaculis nibh. Morbi tincidunt, est non pharetra finibus, risus eros rhoncus velit, et eleifend ligula erat quis odio. Pellentesque sit amet nulla lacus. Fusce mollis aliquet ex vitae pellentesque. Suspendisse ex velit, eleifend in porta vel, porttitor a felis. Vivamus vestibulum, nulla ut iaculis dapibus, eros nisl molestie elit, at viverra neque arcu vel tellus. Vestibulum sed eros purus.

  Donec rhoncus commodo lorem. Ut id porta massa. Etiam accumsan risus eget nunc convallis convallis. Etiam eleifend metus vel libero aliquet, non convallis velit pellentesque. Maecenas vitae posuere libero. Nullam maximus sagittis metus vitae condimentum. Praesent rutrum scelerisque vulputate. Suspendisse egestas dui magna, a tempus turpis placerat vel. Integer venenatis varius feugiat. Quisque a diam eget ex lacinia porttitor. Aliquam congue sapien in tempor accumsan. Morbi sollicitudin est eget ipsum eleifend, et vestibulum risus fringilla. Vestibulum fringilla nibh est, lacinia commodo justo mollis ac. Cras vestibulum odio in varius vehicula. Praesent at sodales nisl.

  Phasellus elit enim, fermentum et finibus ut, commodo non lorem. Aliquam bibendum sapien at arcu semper, eget ultrices elit lacinia. In sed nulla quis massa sagittis cursus eu tempor odio. Nulla at imperdiet ex. Maecenas hendrerit ornare dui, nec porta dolor aliquam quis. Curabitur sollicitudin enim vel vulputate suscipit. Quisque vitae lobortis velit. Maecenas a dui pretium, suscipit elit non, gravida odio. Etiam feugiat a turpis vitae sagittis. Etiam ac nulla id metus semper aliquam eget vitae justo. Vivamus sed odio ornare, commodo tortor eget, pretium metus. Sed a aliquam ligula. Nullam a quam dui. Cras hendrerit viverra nisi, et faucibus orci elementum at.</p>
    </article>
    <article id="article-3">
      <h2>Article 3</h2>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras varius pulvinar aliquam. Suspendisse sed metus vel diam pulvinar lacinia. Mauris odio ante, volutpat vitae arcu sit amet, sodales iaculis nibh. Morbi tincidunt, est non pharetra finibus, risus eros rhoncus velit, et eleifend ligula erat quis odio. Pellentesque sit amet nulla lacus. Fusce mollis aliquet ex vitae pellentesque. Suspendisse ex velit, eleifend in porta vel, porttitor a felis. Vivamus vestibulum, nulla ut iaculis dapibus, eros nisl molestie elit, at viverra neque arcu vel tellus. Vestibulum sed eros purus.

  Donec rhoncus commodo lorem. Ut id porta massa. Etiam accumsan risus eget nunc convallis convallis. Etiam eleifend metus vel libero aliquet, non convallis velit pellentesque. Maecenas vitae posuere libero. Nullam maximus sagittis metus vitae condimentum. Praesent rutrum scelerisque vulputate. Suspendisse egestas dui magna, a tempus turpis placerat vel. Integer venenatis varius feugiat. Quisque a diam eget ex lacinia porttitor. Aliquam congue sapien in tempor accumsan. Morbi sollicitudin est eget ipsum eleifend, et vestibulum risus fringilla. Vestibulum fringilla nibh est, lacinia commodo justo mollis ac. Cras vestibulum odio in varius vehicula. Praesent at sodales nisl.

  Phasellus elit enim, fermentum et finibus ut, commodo non lorem. Aliquam bibendum sapien at arcu semper, eget ultrices elit lacinia. In sed nulla quis massa sagittis cursus eu tempor odio. Nulla at imperdiet ex. Maecenas hendrerit ornare dui, nec porta dolor aliquam quis. Curabitur sollicitudin enim vel vulputate suscipit. Quisque vitae lobortis velit. Maecenas a dui pretium, suscipit elit non, gravida odio. Etiam feugiat a turpis vitae sagittis. Etiam ac nulla id metus semper aliquam eget vitae justo. Vivamus sed odio ornare, commodo tortor eget, pretium metus. Sed a aliquam ligula. Nullam a quam dui. Cras hendrerit viverra nisi, et faucibus orci elementum at.</p>
    </article>
    <article id="article-4">
      <h2>Article 4</h2>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras varius pulvinar aliquam. Suspendisse sed metus vel diam pulvinar lacinia. Mauris odio ante, volutpat vitae arcu sit amet, sodales iaculis nibh. Morbi tincidunt, est non pharetra finibus, risus eros rhoncus velit, et eleifend ligula erat quis odio. Pellentesque sit amet nulla lacus. Fusce mollis aliquet ex vitae pellentesque. Suspendisse ex velit, eleifend in porta vel, porttitor a felis. Vivamus vestibulum, nulla ut iaculis dapibus, eros nisl molestie elit, at viverra neque arcu vel tellus. Vestibulum sed eros purus.

  Donec rhoncus commodo lorem. Ut id porta massa. Etiam accumsan risus eget nunc convallis convallis. Etiam eleifend metus vel libero aliquet, non convallis velit pellentesque. Maecenas vitae posuere libero. Nullam maximus sagittis metus vitae condimentum. Praesent rutrum scelerisque vulputate. Suspendisse egestas dui magna, a tempus turpis placerat vel. Integer venenatis varius feugiat. Quisque a diam eget ex lacinia porttitor. Aliquam congue sapien in tempor accumsan. Morbi sollicitudin est eget ipsum eleifend, et vestibulum risus fringilla. Vestibulum fringilla nibh est, lacinia commodo justo mollis ac. Cras vestibulum odio in varius vehicula. Praesent at sodales nisl.

  Phasellus elit enim, fermentum et finibus ut, commodo non lorem. Aliquam bibendum sapien at arcu semper, eget ultrices elit lacinia. In sed nulla quis massa sagittis cursus eu tempor odio. Nulla at imperdiet ex. Maecenas hendrerit ornare dui, nec porta dolor aliquam quis. Curabitur sollicitudin enim vel vulputate suscipit. Quisque vitae lobortis velit. Maecenas a dui pretium, suscipit elit non, gravida odio. Etiam feugiat a turpis vitae sagittis. Etiam ac nulla id metus semper aliquam eget vitae justo. Vivamus sed odio ornare, commodo tortor eget, pretium metus. Sed a aliquam ligula. Nullam a quam dui. Cras hendrerit viverra nisi, et faucibus orci elementum at.</p>
    </article>
  </main>


<!--==================================================================================--><script>;

const main               = document.querySelector('main')
const getAncestors       = elem => elem.tagName == 'HTML' ? [] : [elem, ...getAncestors(elem.parentNode)]
const getArticle         = elems => elems.find(elem => elem.tagName == 'ARTICLE')
const getIdFromAncestors = elems => (getArticle(elems) || {}).id
const getIdFromHref      = a => (a.href || '').match(/article-\d+/)
const getArticleId       = elem => getIdFromHref(elem) || getIdFromAncestors(getAncestors(elem))
const getHighlighted     = _ => [...document.querySelectorAll('.highlight')]
const removeHighlight    = elem => elem.classList.remove('highlight')
const removeHighlights   = _ => getHighlighted().forEach(removeHighlight)
const getElemToHighlight = articleId => document.querySelector(`#${articleId}`) || main
const addHighlight       = elem => elem.classList.add('highlight')
const highlightElem      = e => (removeHighlights(), addHighlight(getElemToHighlight(getArticleId(e.target))))
document.onclick         = highlightElem

//=====================================================================================//</script>
</body>
</html>
