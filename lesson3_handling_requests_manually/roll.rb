# require 'socket'

# server = TCPServer.new('localhost', 3003)
# loop do
#   client = server.accept

#   request_line = client.gets
#   puts request_line

#   client.puts "HTTP/1.1 200 OK\r\n\r\n"
#   client.puts request_line
#   client.puts rand(1..6)

#   client.close
# end


a = "3-15: 2
3-16: 2.5
3-18: 7
----------week 0: 11.5-------


3-28: 7.5
3-29: 7
3-30: 10
3-31: 12.5
4-3:  1
----------week 1: 38---------


4-4:   14
4-5:   7.5
4-6/7: 2
----------week 2: 23.5-------


4-11: 12
4-12: 8.5
4-13: 7
4-14: 11.5
4-15: 11
4-17: 2
----------week 3: 52---------


4-18: 5
4-19: 2.5
4-20: 6
----------week 4: 13.5--------


4-26: 3
4-27: 5
----------week 5: 8-----------


5-4: 1
5-5: 13.75
5-6: 9.25
----------week 6: 24----------


5-9:  10.5
5-10: 11
5-11: 1.5
5-12: 14.25
5-13: 1.75
5-14: 1
----------week 7: 40-------------


5-16:    6.5
5-17:    13
5-18/19: 16
5-20:    12.25
5-22:    12.5
----------week 8: 60.25-----------


5-23/24: 20
5-26:    10
----------week 9: 30---------------


5-30:     7.75
5-31/6-1: 24.5
----------week 10: 32.25------------


----------week 11: 0--------------


6-13:  8
6-14: 12
6-15: 21.5
6-16:  4
6-17: 14.5
----------week 12: 60------------


6-21: 5.5
6-23: 3
6-24: 6.5
----------week 13: 15------------


6-27: 11.5
6-28: 17.75
----------week 14: 29.25------------


9-22: 4
9-23: 4.5
----------week 15: 8.5------------


10-13: 2
10-14: 4
----------week 16: 6--------------


10-18: 7
10-20: 6
10-21: 1.25
10-22: 2.5
----------week 17: 16.75--------------


10-24: 6.25
----------week 18: 6.25--------------


11-2: 9
11-3: 7.25
----------week 19: 16.25--------------


11-7: 7
----------week 20: 7------------------


11-14:  6.75
11-15: 10.25
11-16: 14.5
11-17:  1.5
11-18:  4
11-19:  3.5
----------week 21: 40.5------------------


11-21:  6.75
11-22:  8
11-27: 11
12-1:   3.5
----------week 22: 29.25---------------"  # => "3-15: 2\n3-16: 2.5\n3-18: 7\n----------week 0: 11.5-------\n\n\n3-28: 7.5\n3-29: 7\n3-30: 10\n3-31: 12.5\n4-3:  1\n----------week 1: 38---------\n\n\n4-4:   14\n4-5:   7.5\n4-6/7: 2\n----------week 2: 23.5-------\n\n\n4-11: 12\n4-12: 8.5\n4-13: 7\n4-14: 11.5\n4-15: 11\n4-17: 2\n----------week 3: 52---------\n\n\n4-18: 5\n4-19: 2.5\n4-20: 6\n----------week 4: 13.5--------\n\n\n4-26: 3\n4-27: 5\n----------week 5: 8-----------\n\n\n5-4: 1\n5-5: 13....

puts a.scan(/week.+?-/).map { |s| s[/(?<=: ).+?(?=-)/] }.map(&:to_f).sum  # => nil

b = "----------week 23: 31.5------------------


1-9:   3.5
1-10:  9.75
1-11:  9.25
1-12:  7.25
1-13:  7.75
1-14: 11.25
1-15:  2.25
----------week 24: 51------------------


1-16: 11
1-17:  8
1-18:  8.75
1-19:  7.75
1-20: 11.5
1-21: 11.5
1-22:  5.5
----------week 25: 64------------------


1-23: 10.25
1-24:  8.5
1-25:  5.25
1-26:  1
1-27:  1
1-28:  1
1-29:  1
----------week 26: 28------------------


1-30:  9.25
1-31: 10
2-1:   8.75
2-2:  10.75
2-3:  10
2-4:  11
2-5:  10.5
----------week 27: 70.25------------------


2-6:   9.5
2-7:  10.75
2-8:  10
2-9:   6.25
2-10: 11
2-11:  8.5
2-12: 11.25
----------week 28: 67.25------------------


2-13: 12.5
2-14: 11.5
2-15: 13.5
2-16: 12.75
2-17:  6.75
2-18: -----
2-19:  9.5
----------week 29: 66.5------------------"  # => "----------week 23: 31.5------------------\n\n\n1-9:   3.5\n1-10:  9.75\n1-11:  9.25\n1-12:  7.25\n1-13:  7.75\n1-14: 11.25\n1-15:  2.25\n----------week 24: 51------------------\n\n\n1-16: 11\n1-17:  8\n1-18:  8.75\n1-19:  7.75\n1-20: 11.5\n1-21: 11.5\n1-22:  5.5\n----------week 25: 64------------------\n\n\n1-23: 10.25\n1-24:  8.5\n1-25:  5.25\n1-26:  1\n1-27:  1\n1-28:  1\n1-29:  1\n----------week 26: 28------------------\n\n\n1-30:  9.25\n1-...

puts b.scan(/week.+?-/).map { |s| s[/(?<=: ).+?(?=-)/] }.map(&:to_f).sum - 9.5  # => nil

# >> 567.75
# >> 369.0
